For systems without getopt.h (i.e. MS windows with Visual Studio)

Borrowed from https://gist.githubusercontent.com/superwills/5815344/raw/607ee30b1551e10691e2b04ff6cafb2b8b107612/getopt.c
which appears to be derived from the BSD sources.